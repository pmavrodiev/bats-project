TARGET			= igraph_try
MAIN			= parse.cpp
CLASSES			= classes.cpp
HEADERS			= classes.h
CPP 			= g++
GRAMMAR_FILE		= scanner.lex
SCANNER 		= flex
SCANNER_FILE		= standard.yy.c
SCANNER_HEADER		= standard.yy.h
SCANNER_OPTIONS		= --outfile=${SCANNER_FILE} --header-file=${SCANNER_HEADER}
DEBUG			= -g
OPTIM			= -O3
CPPFLAGS 		= -Wall -Wextra -pedantic -Wshadow ${DEBUG}
LDFLAGS			= -lfl -ligraph
OBJS			= parse.o classes.o standard.yy.o
RM			= rm

all: ${TARGET}

${TARGET}: ${SCANNER_FILE} ${OBJS} 
	${CPP} ${SCANNER_FILE} ${OBJS} ${CPPFLAGS} ${LDFLAGS} -o $@

${OBJS}: ${MAIN} ${HEADERS} ${CLASSES}
	${CPP} -c ${DEBUG} ${CLASSES} ${MAIN}

${SCANNER_FILE}:  ${GRAMMAR_FILE}
	${SCANNER} ${SCANNER_OPTIONS} ${GRAMMAR_FILE}
	
clean:
	${RM} -f *.o ${TARGET} ${SCANNER_FILE} ${SCANNER_HEADER} *~
